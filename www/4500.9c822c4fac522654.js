"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4500],{4500:($,c,s)=>{s.r(c),s.d(c,{AuthModule:()=>B});var d=s(9808),r=s(2382),a=s(8008),u=s(4032),T=s(1552),e=s(1223);let v=(()=>{class n{constructor(){this.title=T.N.title}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auth"]],decls:8,vars:2,consts:[[1,"ion-text-center"],["type","indeterminate","color","secondary"],[1,""],[3,"fixed"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3),e.qZA(),e._UZ(4,"ion-progress-bar",1),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-grid",3),e._UZ(7,"router-outlet"),e.qZA()()),2&t&&(e.xp6(3),e.Oqu(o.title),e.xp6(3),e.Q6J("fixed",!0))},dependencies:[a.W2,a.jY,a.Gu,a.X7,a.wd,a.sr,u.lC]}),n})();var g=s(91),f=s(165);function C(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function w(n,i){if(1&n&&(e.TgZ(0,"ion-text",14),e.YNc(1,C,2,0,"small",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.username.hasError("required"))}}function A(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function U(n,i){if(1&n&&(e.TgZ(0,"ion-text",14),e.YNc(1,A,2,0,"small",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.password.hasError("required"))}}function y(n,i){1&n&&(e.TgZ(0,"div",16),e._uU(1,"Falsche Anmeldedaten"),e.qZA())}let b=(()=>{class n{constructor(t,o,l){this.authService=t,this.router=o,this.loadingCtrl=l,this.hide=!0,this.wrongCredentials=!1,this.formGroup=new r.cw({username:new r.NI,password:new r.NI})}loginClicked(){this.wrongCredentials=!1,this.loadingCtrl.isLoading=!0,this.authService.login({username:this.formGroup.controls.username.value,password:this.formGroup.controls.password.value}).then(()=>{this.router.navigateByUrl("/")}).catch(o=>{401==o.status&&(this.wrongCredentials=!0)}).finally(()=>this.loadingCtrl.isLoading=!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.$),e.Y36(u.F0),e.Y36(f.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:23,vars:8,consts:[[1,"d-flex","justify-content-center","fit-content","mb-5",3,"ngSubmit"],[1,"d-inline-grid",3,"formGroup"],[1,"d-inline-grid","py-4","display-3","ion-padding-horizontal"],[1,"pt-4","h4"],["routerLink","../register"],[1,"ion-padding-horizontal","ion-padding-top","h5"],[1,""],["placeholder","Username eingeben...","formControlName","username","maxlength","20","required","true"],["color","danger","class","ion-padding-start ion-margin-bottom d-inline",4,"ngIf"],["placeholder","Passwort eingeben...","formControlName","password","required","true",3,"clearOnEdit","type"],["slot","end","fill","clear",3,"click"],["size","large",3,"name"],["class","my-alert",4,"ngIf"],["color","success","type","submit",1,"mt-5",3,"disabled"],["color","danger",1,"ion-padding-start","ion-margin-bottom","d-inline"],[4,"ngIf"],[1,"my-alert"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.loginClicked()}),e.TgZ(1,"div",1)(2,"span",2),e._uU(3," Willkommen! "),e.TgZ(4,"span",3),e._uU(5," Noch keinen Account? "),e.TgZ(6,"a",4),e._uU(7,"Registrieren"),e.qZA()()(),e.TgZ(8,"label",5),e._uU(9,"Username"),e.qZA(),e.TgZ(10,"ion-item",6),e._UZ(11,"ion-input",7),e.qZA(),e.YNc(12,w,2,1,"ion-text",8),e.TgZ(13,"label",5),e._uU(14,"Passwort"),e.qZA(),e.TgZ(15,"ion-item",6),e._UZ(16,"ion-input",9),e.TgZ(17,"ion-button",10),e.NdJ("click",function(){return o.hide=!o.hide}),e._UZ(18,"ion-icon",11),e.qZA()(),e.YNc(19,U,2,1,"ion-text",8),e.YNc(20,y,2,0,"div",12),e.TgZ(21,"ion-button",13),e._uU(22," Anmelden "),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(11),e.Q6J("ngIf",o.formGroup.controls.username.dirty),e.xp6(4),e.Q6J("clearOnEdit",!1)("type",o.hide?"password":"text"),e.xp6(2),e.Q6J("name",o.hide?"eye-outline":"eye-off-outline"),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.password.dirty),e.xp6(1),e.Q6J("ngIf",o.wrongCredentials),e.xp6(1),e.Q6J("disabled",o.formGroup.invalid))},dependencies:[d.O5,r._Y,r.JJ,r.JL,r.Q7,r.nD,r.F,a.YG,a.gu,a.pK,a.Ie,a.yW,a.j9,a.Fo,u.yS,r.sg,r.u]}),n})();var G=s(8675),I=s(4004),h=s(8505),J=s(1566),N=s(4482),R=s(5403),Q=s(1884);function Y(n,i){1&n&&(e.TgZ(0,"small",19),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function L(n,i){if(1&n&&(e.TgZ(0,"ion-text",17),e.YNc(1,Y,2,0,"small",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.name.invalid)}}function P(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function S(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Erlaubte Zeichen: a-z 0-9 . - _"),e.qZA())}function E(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Username bereits vergeben!"),e.qZA())}function O(n,i){if(1&n&&(e.TgZ(0,"ion-text",17),e.YNc(1,P,2,0,"small",20),e.YNc(2,S,2,0,"small",20),e.YNc(3,E,2,0,"small",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.username.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.username.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!t.userAvailable)}}function F(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function z(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Mind. 8 Zeichen"),e.qZA())}function M(n,i){if(1&n&&(e.TgZ(0,"ion-text",17),e.YNc(1,F,2,0,"small",20),e.YNc(2,z,2,0,"small",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.password.hasError("pattern"))}}function D(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function V(n,i){1&n&&(e.TgZ(0,"small"),e._uU(1,"Passwort stimmt nicht \xfcberein"),e.qZA())}function j(n,i){if(1&n&&(e.TgZ(0,"ion-text",21),e.YNc(1,D,2,0,"small",20),e.YNc(2,V,2,0,"small",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.passwordRepeat.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.passwordRepeat.hasError("wrongRepeat"))}}const k=[{path:"",component:v,children:[{path:"login",component:b},{path:"register",component:(()=>{class n{constructor(t,o,l){this.authService=t,this.router=o,this.loadingCtrl=l,this.hide=!0,this.userAvailable=!0,this.pwdRegex={name:"min. 8 Zeichen",regex:"^.{8,}$"},this.formGroup=new r.cw({name:new r.NI,username:new r.NI("",{validators:[r.kI.pattern(/^[a-z0-9.\-_]+$/),r.kI.pattern(/^(?!.*[._\-]{2}).+$/)]}),password:new r.NI("",[r.kI.pattern(this.pwdRegex.regex)]),passwordRepeat:new r.NI}),this.formGroup.controls.passwordRepeat.addValidators(this.repeatedPwdValidator())}isInvalid(){}registerClicked(){this.loadingCtrl.isLoading=!0;const t={name:this.formGroup.controls.name.value,password:this.formGroup.controls.password.value,username:this.formGroup.controls.username.value};this.authService.register(t).then(()=>{this.authService.login({username:t.username,password:t.password}).then(()=>this.router.navigateByUrl("/"))}).finally(()=>this.loadingCtrl.isLoading=!0)}ngOnInit(){this.formGroup.controls.password.valueChanges.subscribe(()=>this.formGroup.controls.passwordRepeat.updateValueAndValidity()),this.formGroup.controls.username.valueChanges.pipe((0,G.O)(""),(0,I.U)(t=>t.toLowerCase().trim()),(0,h.b)(t=>this.formGroup.controls.username.setValue(t,{emitEvent:!1})),function q(n,i=J.z){return(0,N.e)((t,o)=>{let l=null,p=null,_=null;const Z=()=>{if(l){l.unsubscribe(),l=null;const m=p;p=null,o.next(m)}};function X(){const m=_+n,x=i.now();if(x<m)return l=this.schedule(void 0,m-x),void o.add(l);Z()}t.subscribe((0,R.x)(o,m=>{p=m,_=i.now(),l||(l=i.schedule(X,n),o.add(l))},()=>{Z(),o.complete()},void 0,()=>{p=l=null}))})}(300),(0,Q.x)(),(0,h.b)(t=>this.authService.isUsernameAvailable(t).then(o=>this.userAvailable=o.available).catch(o=>console.log(o)))).subscribe(t=>console.log(t))}repeatedPwdValidator(){return t=>{const o=this.formGroup.controls.password.value===t.value;return console.log(t.value+this.formGroup.controls.password.value),o?null:{wrongRepeat:{error:1}}}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.$),e.Y36(u.F0),e.Y36(f.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:32,vars:9,consts:[[1,"d-flex","justify-content-center","fit-content","mb-5",3,"ngSubmit"],[1,"d-inline-grid",3,"formGroup"],[1,"d-inline-grid","py-4","display-3","ion-padding-horizontal"],[1,"pt-4","h4"],["routerLink","../login"],[1,"ion-padding-horizontal","ion-padding-top","h5"],[1,""],["placeholder","Namen eingeben...","formControlName","name","required","true"],["color","danger","class","ion-padding-start ion-margin-bottom d-inline",4,"ngIf"],[1,"ion-padding-start","ion-padding-top","h5"],["placeholder","Username eingeben...","formControlName","username","maxlength","20","required","true"],["placeholder","Passwort eingeben...","formControlName","password","required","true",3,"clearOnEdit","type"],["slot","end","fill","clear",3,"click"],["size","large",3,"name"],["type","password","placeholder","Passwort wiederholen...","formControlName","passwordRepeat","required","true"],["color","danger","class","ion-padding-start ion-margin-bottom d-inherit",4,"ngIf"],["color","success","type","submit",1,"mt-5",3,"disabled"],["color","danger",1,"ion-padding-start","ion-margin-bottom","d-inline"],["class","small",4,"ngIf"],[1,"small"],[4,"ngIf"],["color","danger",1,"ion-padding-start","ion-margin-bottom","d-inherit"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.registerClicked()}),e.TgZ(1,"div",1)(2,"h1",2),e._uU(3," Willkommen! "),e.TgZ(4,"h4",3),e._uU(5," Hast Du bereits einen Account? "),e.TgZ(6,"a",4),e._uU(7,"Anmelden"),e.qZA()()(),e.TgZ(8,"label",5),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"ion-item",6),e._UZ(11,"ion-input",7),e.qZA(),e.YNc(12,L,2,1,"ion-text",8),e.TgZ(13,"label",9),e._uU(14,"Username"),e.qZA(),e.TgZ(15,"ion-item",6),e._UZ(16,"ion-input",10),e.qZA(),e.YNc(17,O,4,3,"ion-text",8),e.TgZ(18,"label",5),e._uU(19,"Passwort"),e.qZA(),e.TgZ(20,"ion-item",6),e._UZ(21,"ion-input",11),e.TgZ(22,"ion-button",12),e.NdJ("click",function(){return o.hide=!o.hide}),e._UZ(23,"ion-icon",13),e.qZA()(),e.YNc(24,M,3,2,"ion-text",8),e.TgZ(25,"label",5),e._uU(26,"Passwort wiederholen"),e.qZA(),e.TgZ(27,"ion-item",6),e._UZ(28,"ion-input",14),e.qZA(),e.YNc(29,j,3,2,"ion-text",15),e.TgZ(30,"ion-button",16),e._uU(31," Registrieren "),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(11),e.Q6J("ngIf",o.formGroup.controls.name.dirty),e.xp6(5),e.Q6J("ngIf",o.formGroup.controls.username.dirty),e.xp6(4),e.Q6J("clearOnEdit",!1)("type",o.hide?"password":"text"),e.xp6(2),e.Q6J("name",o.hide?"eye-outline":"eye-off-outline"),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.password.dirty),e.xp6(5),e.Q6J("ngIf",o.formGroup.controls.passwordRepeat.dirty),e.xp6(1),e.Q6J("disabled",o.formGroup.invalid))},dependencies:[d.O5,r._Y,r.JJ,r.JL,r.Q7,r.nD,r.F,a.YG,a.gu,a.pK,a.Ie,a.yW,a.j9,a.Fo,u.yS,r.sg,r.u],styles:[".pt-4[_ngcontent-%COMP%]{padding-top:1.5vh!important}.pt-5[_ngcontent-%COMP%]{padding-top:3vh!important}.pb-5[_ngcontent-%COMP%]{padding-bottom:3vh!important}"]}),n})()}]}];let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(k),u.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,r.u5,a.Pc,W,r.UX]}),n})()}}]);