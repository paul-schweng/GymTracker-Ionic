"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[570],{570:(z,m,a)=>{a.r(m),a.d(m,{AuthModule:()=>O});var p=a(9808),i=a(2382),s=a(2376),l=a(470),f=a(1552),e=a(1223);let h=(()=>{class t{constructor(){this.title=f.N.title}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-auth"]],decls:8,vars:2,consts:[[1,"ion-text-center"],["type","indeterminate","color","light",1,"loading-bar"],[1,""],[3,"fixed"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3),e.qZA(),e._UZ(4,"ion-progress-bar",1),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-grid",3),e._UZ(7,"router-outlet"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(o.title),e.xp6(3),e.Q6J("fixed",!0))},dependencies:[s.W2,s.jY,s.Gu,s.X7,s.wd,s.sr,l.lC]}),t})();var c=a(7053),d=a(165);function Z(t,r){1&t&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function _(t,r){if(1&t&&(e.TgZ(0,"ion-text",15),e.YNc(1,Z,2,0,"small",16),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.username.hasError("required"))}}function x(t,r){1&t&&(e.TgZ(0,"small"),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function T(t,r){if(1&t&&(e.TgZ(0,"ion-text",17),e.YNc(1,x,2,0,"small",16),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.password.hasError("required"))}}function A(t,r){1&t&&(e.TgZ(0,"div",18),e._uU(1,"Falsche Anmeldedaten"),e.qZA())}let v=(()=>{class t{constructor(n,o,u){this.authService=n,this.router=o,this.loadingCtrl=u,this.hide=!0,this.wrongCredentials=!1,this.formGroup=new i.cw({username:new i.NI,password:new i.NI})}loginClicked(){this.wrongCredentials=!1,this.loadingCtrl.isLoading=!0,this.authService.login({username:this.formGroup.controls.username.value,password:this.formGroup.controls.password.value}).then(()=>{this.router.navigateByUrl("/")}).catch(o=>{401==o.status&&(this.wrongCredentials=!0)}).finally(()=>this.loadingCtrl.isLoading=!1)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.$),e.Y36(l.F0),e.Y36(d.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:25,vars:8,consts:[[1,"d-flex","justify-content-center","fit-content","mb-5",3,"ngSubmit"],[1,"d-inline-grid",3,"formGroup"],[1,"d-inline-grid","py-4","display-3","ion-padding-horizontal"],[1,"pt-4","h4"],["routerLink","../register"],[1,"ion-padding-horizontal","ion-padding-top","h5"],["placeholder","Username eingeben...","formControlName","username","required","true"],[1,"ion-margin-bottom","ion-padding-start","d-inline"],["color","danger","class","",4,"ngIf"],["placeholder","Passwort eingeben...","formControlName","password","required","true",3,"clearOnEdit","type"],["slot","end","fill","clear",3,"click"],["size","large",3,"name"],["color","danger",4,"ngIf"],["class","my-alert",4,"ngIf"],["color","success","type","submit",1,"mt-5",3,"disabled"],["color","danger",1,""],[4,"ngIf"],["color","danger"],[1,"my-alert"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.loginClicked()}),e.TgZ(1,"div",1)(2,"span",2),e._uU(3," Willkommen! "),e.TgZ(4,"span",3),e._uU(5," Noch keinen Account? "),e.TgZ(6,"a",4),e._uU(7,"Registrieren"),e.qZA()()(),e.TgZ(8,"label",5),e._uU(9,"Username"),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",6),e.qZA(),e.TgZ(12,"div",7),e.YNc(13,_,2,1,"ion-text",8),e.qZA(),e.TgZ(14,"label",5),e._uU(15,"Passwort"),e.qZA(),e.TgZ(16,"ion-item"),e._UZ(17,"ion-input",9),e.TgZ(18,"ion-button",10),e.NdJ("click",function(){return o.hide=!o.hide}),e._UZ(19,"ion-icon",11),e.qZA()(),e.TgZ(20,"div",7),e.YNc(21,T,2,1,"ion-text",12),e.qZA(),e.YNc(22,A,2,0,"div",13),e.TgZ(23,"ion-button",14),e._uU(24," Anmelden "),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(12),e.Q6J("ngIf",o.formGroup.controls.username.dirty),e.xp6(4),e.Q6J("clearOnEdit",!1)("type",o.hide?"password":"text"),e.xp6(2),e.Q6J("name",o.hide?"eye-outline":"eye-off-outline"),e.xp6(2),e.Q6J("ngIf",o.formGroup.controls.password.dirty),e.xp6(1),e.Q6J("ngIf",o.wrongCredentials),e.xp6(1),e.Q6J("disabled",o.formGroup.invalid))},dependencies:[p.O5,i._Y,i.JJ,i.JL,i.Q7,i.F,s.YG,s.gu,s.pK,s.Ie,s.yW,s.j9,s.Fo,l.yS,i.sg,i.u]}),t})();var C=a(8675),w=a(4004),g=a(8505),U=a(8372),b=a(1884);function y(t,r){1&t&&(e.TgZ(0,"small",20),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function q(t,r){if(1&t&&(e.TgZ(0,"ion-text",18),e.YNc(1,y,2,0,"small",19),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.name.invalid)}}function G(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function I(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Erlaubte Zeichen: a-z 0-9 . - _"),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Username bereits vergeben!"),e.qZA())}function N(t,r){if(1&t&&(e.TgZ(0,"ion-text",18),e.YNc(1,G,2,0,"small",21),e.YNc(2,I,2,0,"small",21),e.YNc(3,J,2,0,"small",21),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.username.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.username.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!n.userAvailable)}}function R(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function Q(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Mind. 8 Zeichen"),e.qZA())}function Y(t,r){if(1&t&&(e.TgZ(0,"ion-text",18),e.YNc(1,R,2,0,"small",21),e.YNc(2,Q,2,0,"small",21),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.password.hasError("pattern"))}}function L(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Darf nicht leer sein!"),e.qZA())}function P(t,r){1&t&&(e.TgZ(0,"small",22),e._uU(1,"Passwort stimmt nicht \xfcberein"),e.qZA())}function S(t,r){if(1&t&&(e.TgZ(0,"ion-text",18),e.YNc(1,L,2,0,"small",21),e.YNc(2,P,2,0,"small",21),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.passwordRepeat.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.passwordRepeat.hasError("wrongRepeat"))}}const E=[{path:"",component:h,children:[{path:"login",component:v},{path:"register",component:(()=>{class t{constructor(n,o,u){this.authService=n,this.router=o,this.loadingCtrl=u,this.hide=!0,this.userAvailable=!0,this.pwdRegex={name:"min. 8 Zeichen",regex:"^.{8,}$"},this.formGroup=new i.cw({name:new i.NI,username:new i.NI("",{validators:[i.kI.pattern(/^[a-z0-9.\-_]+$/),i.kI.pattern(/^(?!.*[._\-]{2}).+$/)]}),password:new i.NI("",[i.kI.pattern(this.pwdRegex.regex)]),passwordRepeat:new i.NI}),this.formGroup.controls.passwordRepeat.addValidators(this.repeatedPwdValidator())}isInvalid(){}registerClicked(){this.loadingCtrl.isLoading=!0;const n={name:this.formGroup.controls.name.value,password:this.formGroup.controls.password.value,username:this.formGroup.controls.username.value};this.authService.register(n).then(()=>{this.authService.login({username:n.username,password:n.password}).then(()=>this.router.navigateByUrl("/"))}).finally(()=>this.loadingCtrl.isLoading=!1)}ngOnInit(){this.formGroup.controls.password.valueChanges.subscribe(()=>this.formGroup.controls.passwordRepeat.updateValueAndValidity()),this.formGroup.controls.username.valueChanges.pipe((0,C.O)(""),(0,w.U)(n=>n.toLowerCase().trim()),(0,g.b)(n=>this.formGroup.controls.username.setValue(n,{emitEvent:!1})),(0,U.b)(400),(0,b.x)(),(0,g.b)(n=>{""!=n&&this.authService.isUsernameAvailable(n).then(o=>this.userAvailable=o.available).catch(o=>console.log(o))})).subscribe(n=>console.log(n))}repeatedPwdValidator(){return n=>{const o=this.formGroup.controls.password.value===n.value;return console.log(n.value+this.formGroup.controls.password.value),o?null:{wrongRepeat:{error:1}}}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.$),e.Y36(l.F0),e.Y36(d.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:36,vars:9,consts:[[1,"d-flex","justify-content-center","fit-content","mb-5",3,"ngSubmit"],[1,"d-inline-grid",3,"formGroup"],[1,"d-inline-grid","py-4","display-3","ion-padding-horizontal"],[1,"pt-4","h4"],["routerLink","../login"],[1,"ion-padding-horizontal","ion-padding-top","h5"],[1,""],["placeholder","Namen eingeben...","formControlName","name","required","true"],[1,"ion-margin-bottom","ion-padding-start","d-inline"],["color","danger",4,"ngIf"],[1,"ion-padding-start","ion-padding-top","h5"],["counter","true",1,""],["placeholder","Username eingeben...","formControlName","username","maxlength","20","required","true"],["placeholder","Passwort eingeben...","formControlName","password","required","true",3,"clearOnEdit","type"],["slot","end","fill","clear",3,"click"],["size","large",3,"name"],["type","password","placeholder","Passwort wiederholen...","formControlName","passwordRepeat","required","true"],["color","success","type","submit",1,"mt-5",3,"disabled"],["color","danger"],["class","small",4,"ngIf"],[1,"small"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.registerClicked()}),e.TgZ(1,"div",1)(2,"h1",2),e._uU(3," Willkommen! "),e.TgZ(4,"h4",3),e._uU(5," Hast Du bereits einen Account? "),e.TgZ(6,"a",4),e._uU(7,"Anmelden"),e.qZA()()(),e.TgZ(8,"label",5),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"ion-item",6),e._UZ(11,"ion-input",7),e.qZA(),e.TgZ(12,"div",8),e.YNc(13,q,2,1,"ion-text",9),e.qZA(),e.TgZ(14,"label",10),e._uU(15,"Username"),e.qZA(),e.TgZ(16,"ion-item",11),e._UZ(17,"ion-input",12),e.qZA(),e.TgZ(18,"div",8),e.YNc(19,N,4,3,"ion-text",9),e.qZA(),e.TgZ(20,"label",5),e._uU(21,"Passwort"),e.qZA(),e.TgZ(22,"ion-item",6),e._UZ(23,"ion-input",13),e.TgZ(24,"ion-button",14),e.NdJ("click",function(){return o.hide=!o.hide}),e._UZ(25,"ion-icon",15),e.qZA()(),e.TgZ(26,"div",8),e.YNc(27,Y,3,2,"ion-text",9),e.qZA(),e.TgZ(28,"label",5),e._uU(29,"Passwort wiederholen"),e.qZA(),e.TgZ(30,"ion-item",6),e._UZ(31,"ion-input",16),e.qZA(),e.TgZ(32,"div",8),e.YNc(33,S,3,2,"ion-text",9),e.qZA(),e.TgZ(34,"ion-button",17),e._uU(35," Registrieren "),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(12),e.Q6J("ngIf",o.formGroup.controls.name.dirty),e.xp6(6),e.Q6J("ngIf",o.formGroup.controls.username.dirty),e.xp6(4),e.Q6J("clearOnEdit",!1)("type",o.hide?"password":"text"),e.xp6(2),e.Q6J("name",o.hide?"eye-outline":"eye-off-outline"),e.xp6(2),e.Q6J("ngIf",o.formGroup.controls.password.dirty),e.xp6(6),e.Q6J("ngIf",o.formGroup.controls.passwordRepeat.dirty),e.xp6(1),e.Q6J("disabled",o.formGroup.invalid))},dependencies:[p.O5,i._Y,i.JJ,i.JL,i.Q7,i.nD,i.F,s.YG,s.gu,s.pK,s.Ie,s.yW,s.j9,s.Fo,l.yS,i.sg,i.u],styles:[".pt-4[_ngcontent-%COMP%]{padding-top:1.5vh!important}.pt-5[_ngcontent-%COMP%]{padding-top:3vh!important}.pb-5[_ngcontent-%COMP%]{padding-bottom:3vh!important}"]}),t})()}]}];let F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(E),l.Bz]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,i.u5,s.Pc,F,i.UX]}),t})()}}]);